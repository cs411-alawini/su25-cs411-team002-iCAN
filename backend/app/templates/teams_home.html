{% extends "base.html" %}

<!-- Tab title -->
{% block title %}Teams{% endblock %}

<!-- For login HTML body -->    
{% block content %}
<div class="teams_body">
    <!-- Navbar top -->
    <div class="top_navbar">
        <button type="button" onclick="location.href='/home'">Back to Homepage</button>
    </div>

    <div id="team_header">
        <h1>Your Teams</h1>
    </div>

    <div id="teams_search">
        <input type="text" id="team_searchbar" placeholder="Search teams..." />
    </div>

    <div id="teams_display">
        {% for team in teams %}
        <div class="team_line">

            <div class="team_name">
                {{ team.team_name }}
            </div>

            <div class="team_preview">
                {% for pokemon in team.pokemons %}
                        <span>{{ pokemon }}</span>{% if not loop.last %}, {% endif %}
                {% endfor %}
            </div>

            <div class="team_buttons">
                <button>Edit</button>
                <button>Delete</button>
            </div>

        </div>
        {% endfor %}
        <button type='button' onclick="location.href='/teams/create'">Create Team</button>
    </div>
</div>

<script>
document.getElementById('team_searchbar').addEventListener('input', function () {
    const query = this.value.toLowerCase();
    const teamElements = document.querySelectorAll('.team_line');

    teamElements.forEach(team => {
        const nameEl = team.querySelector('.team_name');
        const teamName = nameEl ? nameEl.innerText.toLowerCase() : '';

        if (teamName.includes(query)) {
            team.style.display = '';
        } else {
            team.style.display = 'none';
        }
    });
});
</script>
{% endblock %}